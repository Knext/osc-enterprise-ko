# Chapter 13. Open Source Audits in Merger and Acquisition Transactions
본 챕터에서는 인수 합병 거래에서 오픈 소스 감사 프로세스의 개요를 제공하고, 기업 거래에 대해 어떻게 더 잘 준비할 것인지에 대한 권고사항을 제시합니다.
<br>
<br>

## 오픈소스 사용 시나리오
오픈소스 실사 프로세스를 수행하기 전에 오픈소스를 어떻게 사용하는지 알아둘 필요가 있다.

### 소스코드 통합
<p align="center">
<img src="/image/chapter13/integration.png" width="600"> 
  오픈소스(녹색), 통합되는 코드(파란색)
</p>

- 전체 오픈소스 코드나 부분 코드를 복사하여 독점 코드 내에 통합하여 사용
- 오픈소스 라이선스는 회사의 법적 책임과 코드 특성에 영향을 미칠 수 있는 다양한 의무를 수반하므로, 기업은 오픈소스 코드의 모든 통합과 사용을 추적 및 승인해야 함
- 오픈소스 개발자 교육을 받지 않았거나, 임시 직원에 의존하는 경우 발생 가능성이 높음.
- 코드 스캔 도구등을 이용해서 확인 필요
<br>

### 소스코드 링킹
<p align="center">
<img src="/image/chapter13/linking.png" width="600">
</p>

- 오픈소스 라이브러리를 사용하는 가장 일반적인 방식(정적/동적, 패키징, 의존성 추가를 모두 포함)
-	결합된 코드는 별도의 디렉토리 또는 파일에 있을 가능성이 높기 때문에 탐지하는 것이 쉬울 수도 있음
<br>

### 소스코드 수정
<p align="center">
<img src="/image/chapter13/modify.png" width="600">
</p>

- 오픈소스 컴포넌트에 새로운 코드를 추가/수정/삭제하는 것
<br>

> 소프트웨어 개발에 그래픽 프레임워크, 게임 엔진, SDK 등이 사용되어 개발 산출물에 일부가 포함될 수 있다. 개발툴에 의해 추가되는 코드가 정적으로 결합된다면 반드시 라이선스 확인이 되어야 한다.

## 오픈소스 감사
### 1. 오픈소스 감사를 왜 수행해야 하는가?
-	오픈소스 라이선스 의무사항으로 인해 M&A 기업의 사업 방향성 다를 수 있음
  -	배포에 따른 의무사항, 홍보 제한, 의무사항을 준수하기 어려운 상황 등
-	이러한 리스크는 일찍 확인해야 하기 때문에 오픈소스 감사가 필요함
<br>

### 2. 오픈소스 감사를 위임해야 하는가?
- 오픈소스 감사 주체는 기업별, 인수 목적별, 소스코드 크기에 따라 다를 수 있음
- 예를 들어, 소규모 인수인 경우 일부 기업은 대상 회사에서 제공한 오픈소스 사용 BOM만 검토 및 개발 책임자와 인터뷰등을 선호할 수도 있음
<br>

### 3. 감사 대상(input)과 그 결과(output)
- 대상: 전체 S/W Stack(Proprietaty,3rd partyOpen Source)
- 결과: Open Source S/W BOM (Component, 출처, 라이선스 등)
<p align="center">
<img src="/image/chapter13/audit_input_output.png" width="600">
</p>
<br>

### 4. 감사 작업 범위 파악
소스코드 크기와 복잡성에 따라 증가하며, 아래의 정보등을 통해 추정 가능
1. 소스코드 크기, 라인 수, 파일 수, 확장자(바이너리, 설정 및 문서 파일) 등을 미리 파악하여 감사 범위를 지정
2. 프로젝트에 사용되는 오픈소스 구성요소 버전 기록등에 대한 파악
3. 스캔할 전체 파일 수에 대해서 파악.(다른 정보들이 없는 경우 꼭 필요)
<br>
<br>

## 감사 방법
**전통적인 감사 방법** 
<br> 감사자가 모든 소스코드에 접근하여 직접 감사 시행, 모든 감사 서비스를 지원 <br>
<p align="center">
<img src="/image/chapter13/traditional-audit.png" width="900">
</p>
<br>

**블라인드 감사 방법** 
<br>	감사자가 소스코드에 접근하지 않고 원격으로 감사, 소스코도의 기밀성을 제공하기 위해 설계됨
> 이 방식은 FOSSID에서 최초로 개발하였음 (독점 업체)

<p align="center">
<img src="/image/chapter13/blind-audit.png" width="900">
</p>
<br>

**DIY 감사 방법** <br> 감사 대상 회사에서 직접 수행, 감사 비용을 줄이기 위해서 사용<br>
<p align="center">
<img src="/image/chapter13/diy-audit.png" width="900">
</p>
<br>

> 최종 감사 보고서에는 샘플 코드, 사용하지 않는 코드등에 대한 검증 결과가 포함되므로 이를 잘 걸러야한다. SPDX 형태의 보고서를 요청하는 경우 추가 비용이 발생할 수 있다.

### 5. 보안과 버전 관리
보안 이슈가 있다면 전체 소프트웨어의 보안이 문제가 될 수 있기 때문에 보안 감사도 진행해야 함
<br>
<br>

### 6. 사전 및 사후 인수 규제
인수 회사는 대상 기업이 어떻게 오픈소스를 사용하고 관리하였는지, 의무사항을 얼마나 성공적으로 이행해 왔는지 명확하게 파악해야 함, 이를 기반으로 오픈소스 의무사항 이슈를 해결해야 함.
감사에서 확인된 컴플라이선스 이슈는 코드삭제, 구매 또는 재구현 등을 통해서 해결. 만약 이미 배포한 상황이라면 의무사항을 준수하고 이를 인수 비용에 고려해야함. 
<br>
<br>

### 7. 인수 대상 회사에서의 감사 준비
-	본인의 소스코드에 어떤 오픈소스가 포함되어 있는지 알아야 함(식별/관리하는 프로세스가 있어야함)
  - 프로세스 기본 구성: 정책, 프로세스, 직원, 교육, 툴
-	컴플라이언스 준수
- 오픈소스를 보안취약점이 개선된 최신 소프트웨어 버전을 사용해야 함
- 컴플라이언스 준수 상태 측정 
  - [OpenChain Conformant 웹 사이트](https://www.openchainproject.org/conformance)에서 현재의 컴플라이언스 준수 상태를 체크하는 것을 권장함
<br>

### 8. 인수 회사에서의 감사 준비
-	당사의 요구사항에 적합한 감사 방식을 선택해야 함
-	가장 우선적으로 어떤 것을 고려하고 확인해야 하는지 정리해야 함
- 감사를 진행하면서 대상 기업에게 확인해야 하는 질문들을 사전에 정리해야 함
  -	대상 또는 인수 회사의 IP에 리스크가 될 만한 라이선스와 소스코드를 사용하였는가?
  - 출처/라이선스가 알려지지 않는 스니핏을 사용했는가?
  -	대상 기업에서 오픈소스 컴플라이언스가 충분히 진행되고 있는가?
  -	대상 기업에서 오픈소스 컴포넌트의 보안 취약점을 추적 관리하고 있는가?
  -	제품을 출시할 때 오픈소스 라이선스 의무사항을 준수하기 위해 필요한 모든것(예>고지문)을 제공하고 있는가?
  -	대상 기업의 컴플라이언스 프로세스는 제품 출시 일정에 맞춰져 있는가?
  -	대상 기업은 내부/외부 요청에 대해 적시에 소스코드 공개를 대응할 수 있는 절차를 갖추고 있는가?
-	기업간에 라이선스 정책(예>특정 라이선스는 사용하지 않는다 등)에 대해 충돌이 있다면 양사가 논의하여 합의 방안을 도출해야 함
-	인수 기업이 대상 기업에게 공식 컴플라이언스 정책과 프로세스를 수립하도록 도와주어야 함 (주로 대규모 기업이 작은 스타트업을 인수할 때)
